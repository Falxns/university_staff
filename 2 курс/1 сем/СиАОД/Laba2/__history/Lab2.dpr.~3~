program Lab2;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils;

procedure Add(out p: Pointer; q, r: Pointer);
var
    x, y: Pointer;
begin
    new(x);
    p := x;
    while (q <> nil) and (r <> nil) do
    begin
        if q^.Power > r^.Power then
        begin
            x^.Power := q^.Power;
            x^.Koef := q^.Koef;
            q := q^.Next;
        end
        else
            if q^.Power < r^.Power then
            begin
                x^.Power := r^.Power;
                x^.Koef := r^.Koef;
                r := r^.Next;
            end
            else
            begin
                x^.Power := r^.Power;
                x^.Koef := r^.Koef + q^.Koef;
                q := q^.Next;
                r := r^.Next;
            end;
        y := x;
        new(x);
        y^.Next := x;
    end;
    y^.Next := nil;
end;

begin
    Writeln('Первый многочлен:');
    A := ReadMN;
    Write('Итоговый многочлен: ');
    WriteMN(A);
    Writeln;

    Writeln('Второй многочлен:');
    B := ReadMN;
    Write('Итоговый многочлен: ');
    WriteMN(B);
    Writeln;

    Write('Многочлены ');
    if not Equality(A, B) then
        Write('не ');
    Write('равны.');
    Writeln;

    Write('Задайте значение X.');
    Readln(x);
    Writeln('Значение первого многочлена: ', Meaning(A,x));
    Writeln('Значение второго многочлена: ', Meaning(B,x));
    Add(C, A, B);
    Write('Сумма многочленов: ');
    WriteMN(C);
    Readln;
end.
